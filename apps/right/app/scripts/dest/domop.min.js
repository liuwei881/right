
define(["angular"],function(a){"use strict";a.module("rightApp.dest.CompanyCtrl",[]).controller("CompanyCtrl",function(a,b,c,d){a.total=0,a.pageSize=15,a.page=1,a.searchKey="",a.initPage=function(b){d.get("/api/v2/company/",{page:a.page,pageSize:a.pageSize,searchKey:b}).success(function(c){a.searchKey=b,a.total=c.total,a.rows=c.rows,a.success=c.success,a.username=c.username})},b.current.needRequest&&a.initPage(),a.Create=function(){var b=c.open({animation:!0,templateUrl:"add.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return{}},title:function(){return{title:"新建公司"}}}});b.save=function(c){console.log(c),d.save("/api/v2/company/",c).success(function(c){b.close(),a.initPage()}).error(function(b){a.initPage()})}},a.editcompany=function(b){var e=c.open({animation:!0,templateUrl:"editcompany.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"修改公司"}}}});e.companyput=function(b){d.companyput("/api/v2/company/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.deletecompany=function(b){var e=c.open({animation:!0,templateUrl:"deletecompany.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"删除公司"}}}});e.companydel=function(b){d.companydel("/api/v2/company/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.detailcompany=function(b){c.open({animation:!0,templateUrl:"detailcompany.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return"查看"}}})},a.Search=function(b){a.initPage(b)},a.pageAction=function(b){d.get({page:b}).success(function(b){a.total=b.total,a.rows=b.rows})}}),a.module("rightApp.dest.DepartmentCtrl",[]).controller("DepartmentCtrl",function(a,b,c,d,e){a.total=0,a.pageSize=15,a.page=1,a.searchKey="",a.initPage=function(b){d.get("/api/v2/department/",{page:a.page,pageSize:a.pageSize,searchKey:b}).success(function(c){a.searchKey=b,a.total=c.total,a.rows=c.rows,a.success=c.success,a.username=c.username})},b.current.needRequest&&a.initPage(),a.Create=function(){var b=JSON.parse(e.fetch("/api/v2/companyshow/")),f=c.open({animation:!0,templateUrl:"add.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return{}},title:function(){return{title:"新建部门",companylist:b}}}});f.save=function(b){console.log(b),d.save("/api/v2/department/",b).success(function(b){f.close(),a.initPage()}).error(function(b){a.initPage()})}},a.detaildepartment=function(b){c.open({animation:!0,templateUrl:"detaildepartment.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return"查看"}}})},a.editdepartment=function(b){var f=JSON.parse(e.fetch("/api/v2/companyshow/")),g=c.open({animation:!0,templateUrl:"editdepartment.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"修改部门",companylist:f}}}});g.departput=function(b){d.departput("/api/v2/department/",b).success(function(c){console.log(b),g.close(),a.initPage()}).error(function(b){a.initPage()})}},a.deletedepartment=function(b){var e=c.open({animation:!0,templateUrl:"deletedepartment.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"删除部门"}}}});e.departdel=function(b){d.departdel("/api/v2/department/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.Search=function(b){a.initPage(b)},a.pageAction=function(b){d.get({page:b}).success(function(b){a.total=b.total,a.rows=b.rows})}}),a.module("rightApp.dest.FooterCtrl",[]).controller("FooterCtrl",function(a){a.$on("$includeContentLoaded",function(){Layout.initFooter()})}),a.module("rightApp.dest.HeaderCtrl",[]).controller("HeaderCtrl",function(a,b,c,d,e,f){a.initPage=function(){f.get("/api/v2/username/").success(function(b){a.username=b.username,a.rows=b.rows})},a.$on("$includeContentLoaded",function(){Layout.initHeader(),a.initPage()}),a.Logout=function(){b.remove("user"),e.get("/api/v2/logout"),c.go("login")},a.edit=function(){var b=d.open({animation:!0,templateUrl:"edit.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows},title:function(){return{title:"修改密码"}}}});b.userput=function(c){f.userput("/api/v2/changepasswd/",c).success(function(d){console.log(c),b.close(),a.initPage()})}},a.person=function(){var b=d.open({animation:!0,templateUrl:"person.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows},title:function(){return{title:"修改个人资料"}}}});b.userput=function(c){f.userput("/api/v2/username/",c).success(function(d){console.log(c),b.close(),a.initPage()})}}}),a.module("rightApp.dest.LoginCtrl",[]).controller("LoginCtrl",function(a,b,c){a.Login=function(){a.username!==!1&&void 0!==a.password?b.get("/api/v2/right/login",{params:{user:a.username,password:a.password}}).success(function(b){switch(b.status){case 200:a.alert={type:"alert-success",message:"登陆成功"},c.go("dashboard");break;case 404:a.alert={type:"alert-danger",message:"帐号密码错误"};break;case 400:a.alert={type:"alert-danger",message:"此用户没有分配角色，请联系管理员"}}}):a.alert={type:"alert-danger",message:"请输入帐号密码"}}}),a.module("rightApp.dest.LogoutCtrl",[]).controller("LogoutCtrl",function(a,b,c){a.Logout=function(){b.get("/api/v2/logout").success(function(a){alert(a)})}}),a.module("rightApp.dest.MainCtrl",[]).controller("MainCtrl",function(){this._AuthorCompany_="Ciprun"}),a.module("rightApp.dest.ModalInstanceCtrl",["ui.bootstrap","ui.bootstrap.tpls"]).controller("ModalInstanceCtrl",function(a,b,c,d){a.item=c,a.title=d,a.Save=function(){b.save(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.Delete=function(){b.Delete(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.cancel=function(){b.dismiss("cancel")},a.diyfun=function(a){b.diyfun(a)},a.roleput=function(){b.roleput(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.saveroleright=function(){b.saveroleright(a.item)},a.showroleright=function(){b.showroleright(a.item)},a.saveuserrole=function(){b.saveuserrole(a.item)},a.showuserrole=function(){b.showuserrole(a.item)},a.userput=function(){b.userput(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.posput=function(){b.posput(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.departput=function(){b.departput(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.companyput=function(){b.companyput(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.roledel=function(){b.roledel(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.userdel=function(){b.userdel(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.posdel=function(){b.posdel(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.departdel=function(){b.departdel(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}},a.companydel=function(){b.companydel(a.item),a.alert={type:"alert-danger",message:"权限不足,无法操作!!!"}}}),a.module("rightApp.dest.PageHeadCtrl",[]).controller("PageHeadCtrl",function(a){}),a.module("rightApp.dest.PositionCtrl",[]).controller("PositionCtrl",function(a,b,c,d){a.total=0,a.pageSize=15,a.page=1,a.searchKey="",a.initPage=function(b){d.get("/api/v2/position/",{page:a.page,pageSize:a.pageSize,searchKey:b}).success(function(c){a.searchKey=b,a.total=c.total,a.rows=c.rows,a.success=c.success,a.username=c.username})},b.current.needRequest&&a.initPage(),a.Create=function(){var b=c.open({animation:!0,templateUrl:"add.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return{}},title:function(){return{title:"新建职位"}}}});b.save=function(c){console.log(c),d.save("/api/v2/position/",c).success(function(c){b.close(),a.initPage()}).error(function(b){a.initPage()})}},a.editpos=function(b){var e=c.open({animation:!0,templateUrl:"editpos.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"修改职位"}}}});e.posput=function(b){d.posput("/api/v2/position/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.delpos=function(b){var e=c.open({animation:!0,templateUrl:"delpos.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"删除职位"}}}});e.posdel=function(b){d.posdel("/api/v2/position/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.detailpos=function(b){c.open({animation:!0,templateUrl:"detailpos.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return"查看"}}})},a.Search=function(b){a.initPage(b)},a.pageAction=function(b){d.get({page:b}).success(function(b){a.total=b.total,a.rows=b.rows})}}),a.module("rightApp.dest.RoleCtrl",[]).controller("RoleCtrl",function(a,b,c,d,e){a.total=0,a.pageSize=15,a.page=1,a.searchKey="",a.initPage=function(b){d.get("/api/v2/roles/",{page:a.page,pageSize:a.pageSize,searchKey:b}).success(function(c){a.searchKey=b,a.total=c.total,a.rows=c.rows,a.success=c.success,a.username=c.username})},b.current.needRequest&&a.initPage(),a.Create=function(){var b=c.open({animation:!0,templateUrl:"add.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return{}},title:function(){return{title:"新建角色"}}}});b.save=function(c){console.log(c),d.save("/api/v2/roles/",c).success(function(c){b.close(),a.initPage()}).error(function(b){a.initPage()})}},a.editrole=function(b){var e=c.open({animation:!0,templateUrl:"editrole.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"编辑角色"}}}});e.roleput=function(b){d.roleput("/api/v2/roles/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.detailrole=function(b){c.open({animation:!0,templateUrl:"detailrole.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return"查看"}}})},a.deleterole=function(b){var e=c.open({animation:!0,templateUrl:"deleterole.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"删除角色"}}}});e.roledel=function(b){d.roledel("/api/v2/roles/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.roleright=function(b){var f=JSON.parse(e.fetch("/api/v2/menu/"));console.log(f);var g=c.open({animation:!0,templateUrl:"roleright.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return e.showroleright("/api/v2/role/member/",b).then(function(a){return a.data.rows})},title:function(){return{title:"角色权限分配",allmenu:f}}}});g.saveroleright=function(b){d.saveroleright("/api/v2/role/member/",b).success(function(c){console.log(b),g.close(),a.initPage()})}},a.userrole=function(b){var f=JSON.parse(e.fetch("/api/v2/departfunc/")),g=c.open({animation:!0,templateUrl:"userright.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return e.showuserrole("/api/v2/user/role/",b).then(function(a){return a.data.rows})},title:function(){return{title:"用户分配",companylist:f}}}});g.saveuserrole=function(b){d.saveuserrole("/api/v2/user/role/",b).success(function(c){console.log(b),g.close(),a.initPage()})}},a.Search=function(b){a.initPage(b)},a.pageAction=function(b){d.get({page:b}).success(function(b){a.total=b.total,a.rows=b.rows})}}),a.module("rightApp.dest.SidebarCtrl",[]).controller("SidebarCtrl",function(a){a.$on("$includeContentLoaded",function(){Layout.initSidebar()}),a.pageSidebarClosed=!1}),a.module("rightApp.dest.UserCtrl",[]).controller("UserCtrl",function(a,b,c,d,e){a.total=0,a.pageSize=15,a.page=1,a.searchKey="",a.initPage=function(b){d.get("/api/v2/user/",{page:a.page,pageSize:a.pageSize,searchKey:b}).success(function(c){a.searchKey=b,a.total=c.total,a.rows=c.rows,a.success=c.success,a.username=c.username})},b.current.needRequest&&a.initPage(),a.Create=function(){var b=JSON.parse(e.fetch("/api/v2/departfunc/")),f=JSON.parse(e.fetch("/api/v2/positionshow/")),g=c.open({animation:!0,templateUrl:"add.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return{}},title:function(){return{title:"新建用户",companylist:b,positionshow:f}}}});g.save=function(b){console.log(b),d.save("/api/v2/user/",b).success(function(b){g.close(),a.initPage()}).error(function(b){a.initPage()})}},a.edituser=function(b){var f=JSON.parse(e.fetch("/api/v2/departfunc/")),g=JSON.parse(e.fetch("/api/v2/positionshow/")),h=c.open({animation:!0,templateUrl:"edituser.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"编辑用户",companylist:f,positionshow:g}}}});h.userput=function(b){d.userput("/api/v2/user/",b).success(function(c){console.log(b),h.close(),a.initPage()}).error(function(b){a.initPage()})}},a.deleteuser=function(b){var e=c.open({animation:!0,templateUrl:"deleteuser.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return{title:"删除用户"}}}});e.userdel=function(b){d.userdel("/api/v2/user/",b).success(function(c){console.log(b),e.close(),a.initPage()}).error(function(b){a.initPage()})}},a.detailuser=function(b){c.open({animation:!0,templateUrl:"detailuser.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{item:function(){return a.rows[b]},title:function(){return"查看"}}})},a.Search=function(b){a.initPage(b)},a.pageAction=function(b){d.get("/api/v2/user/",{page:b}).success(function(b){a.total=b.total,a.rows=b.rows})}})});